<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher Portal | JRC ‡§∏‡•ç‡§ï‡•Ç‡§≤</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
  <header class="bg-teal-800 text-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="bg-teal-500 font-extrabold rounded-full h-10 w-10 flex items-center justify-center text-lg">T</div>
          <div>
            <h1 class="text-xl font-bold">JRC Teacher Portal</h1>
            <p class="text-xs text-teal-200">‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§®, ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§µ ‡§´‡•Ä‡§∏</p>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-sm text-teal-200" id="teacherName"></span>
          <button id="refreshBtn" class="bg-teal-600 hover:bg-teal-500 px-4 py-2 rounded-lg text-sm font-medium">üîÑ Refresh</button>
          <button id="logoutBtn" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-sm font-medium">üö™ Logout</button>
          <a href="school.html" class="bg-teal-500 hover:bg-teal-400 px-4 py-2 rounded-lg text-sm font-medium">üè† Home</a>
        </div>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <!-- 1. Student Registration (Teacher admits student) -->
    <section class="bg-white rounded-lg shadow p-6 mb-8">
      <h2 class="text-xl font-bold text-teal-800 mb-4">üìù Student Registration (‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç)</h2>
      <p class="text-sm text-gray-600 mb-4">‡§ú‡§ø‡§∏ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•ã ‡§Ü‡§™ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á, ‡§µ‡§π‡•Ä ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§ü‡•Ç‡§°‡•á‡§Ç‡§ü ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‡§∏‡•á ‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§®‡§æ‡§Æ case-sensitive ‡§∞‡§ñ‡•á‡§Ç‡•§</p>
      <form id="registerStudentForm" class="flex flex-wrap gap-4 items-end">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ (‡§ú‡•à‡§∏‡•á ‡§≤‡§ø‡§ñ‡•á‡§Ç ‡§µ‡•à‡§∏‡§æ ‡§π‡•Ä)</label>
          <input type="text" id="regName" required class="border rounded-lg px-3 py-2 w-48 focus:ring-2 focus:ring-teal-500" placeholder="‡§®‡§æ‡§Æ">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">‡§ï‡§ï‡•ç‡§∑‡§æ</label>
          <select id="regClass" required class="border rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500">
            <option value="">‡§ö‡•Å‡§®‡•á‡§Ç</option>
            <option value="Nursery">Nursery</option>
            <option value="LKG">LKG</option>
            <option value="UKG">UKG</option>
            <option value="1">‡§ï‡§ï‡•ç‡§∑‡§æ 1</option>
            <option value="2">‡§ï‡§ï‡•ç‡§∑‡§æ 2</option>
            <option value="3">‡§ï‡§ï‡•ç‡§∑‡§æ 3</option>
            <option value="4">‡§ï‡§ï‡•ç‡§∑‡§æ 4</option>
            <option value="5">‡§ï‡§ï‡•ç‡§∑‡§æ 5</option>
            <option value="6">‡§ï‡§ï‡•ç‡§∑‡§æ 6</option>
            <option value="7">‡§ï‡§ï‡•ç‡§∑‡§æ 7</option>
            <option value="8">‡§ï‡§ï‡•ç‡§∑‡§æ 8</option>
            <option value="9">‡§ï‡§ï‡•ç‡§∑‡§æ 9</option>
            <option value="9-Arts">‡§ï‡§ï‡•ç‡§∑‡§æ 9 (Arts)</option>
            <option value="9-Home Science">‡§ï‡§ï‡•ç‡§∑‡§æ 9 (Home Science)</option>
            <option value="9-Science">‡§ï‡§ï‡•ç‡§∑‡§æ 9 (Science)</option>
            <option value="10">‡§ï‡§ï‡•ç‡§∑‡§æ 10</option>
            <option value="11-Arts">‡§ï‡§ï‡•ç‡§∑‡§æ 11 (Arts)</option>
            <option value="11-Commerce">‡§ï‡§ï‡•ç‡§∑‡§æ 11 (Commerce)</option>
            <option value="11-Science">‡§ï‡§ï‡•ç‡§∑‡§æ 11 (Science)</option>
            <option value="12-Arts">‡§ï‡§ï‡•ç‡§∑‡§æ 12 (Arts)</option>
            <option value="12-Commerce">‡§ï‡§ï‡•ç‡§∑‡§æ 12 (Commerce)</option>
            <option value="12-Science">‡§ï‡§ï‡•ç‡§∑‡§æ 12 (Science)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">‡§∞‡•ã‡§≤ ‡§®‡§Ç‡§¨‡§∞</label>
          <input type="text" id="regRollNo" required class="border rounded-lg px-3 py-2 w-28 focus:ring-2 focus:ring-teal-500" placeholder="‡§∞‡•ã‡§≤">
        </div>
        <button type="submit" class="bg-teal-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-teal-700">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
      </form>
      <p id="regMessage" class="mt-2 text-sm hidden"></p>
    </section>

    <!-- 2. Class filter & Students list -->
    <section class="bg-white rounded-lg shadow p-6 mb-8">
      <h2 class="text-xl font-bold text-teal-800 mb-4">üë• ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∏‡•Ç‡§ö‡•Ä (‡§ï‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞)</h2>
      <div class="flex flex-wrap gap-4 items-center mb-4">
        <label class="font-medium text-gray-700">‡§ï‡§ï‡•ç‡§∑‡§æ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞:</label>
        <select id="classFilter" class="border rounded-lg px-3 py-2 focus:ring-2 focus:ring-teal-500">
          <option value="">‡§∏‡§≠‡•Ä ‡§ï‡§ï‡•ç‡§∑‡§æ‡§è‡§Ç</option>
          <option value="Nursery">Nursery</option>
          <option value="LKG">LKG</option>
          <option value="UKG">UKG</option>
          <option value="1">‡§ï‡§ï‡•ç‡§∑‡§æ 1</option>
          <option value="2">‡§ï‡§ï‡•ç‡§∑‡§æ 2</option>
          <option value="3">‡§ï‡§ï‡•ç‡§∑‡§æ 3</option>
          <option value="4">‡§ï‡§ï‡•ç‡§∑‡§æ 4</option>
          <option value="5">‡§ï‡§ï‡•ç‡§∑‡§æ 5</option>
          <option value="6">‡§ï‡§ï‡•ç‡§∑‡§æ 6</option>
          <option value="7">‡§ï‡§ï‡•ç‡§∑‡§æ 7</option>
          <option value="8">‡§ï‡§ï‡•ç‡§∑‡§æ 8</option>
          <option value="9">‡§ï‡§ï‡•ç‡§∑‡§æ 9</option>
          <option value="9-Arts">‡§ï‡§ï‡•ç‡§∑‡§æ 9 (Arts)</option>
          <option value="9-Home Science">‡§ï‡§ï‡•ç‡§∑‡§æ 9 (Home Science)</option>
          <option value="9-Science">‡§ï‡§ï‡•ç‡§∑‡§æ 9 (Science)</option>
          <option value="10">‡§ï‡§ï‡•ç‡§∑‡§æ 10</option>
          <option value="11-Arts">‡§ï‡§ï‡•ç‡§∑‡§æ 11 (Arts)</option>
          <option value="11-Commerce">‡§ï‡§ï‡•ç‡§∑‡§æ 11 (Commerce)</option>
          <option value="11-Science">‡§ï‡§ï‡•ç‡§∑‡§æ 11 (Science)</option>
          <option value="12-Arts">‡§ï‡§ï‡•ç‡§∑‡§æ 12 (Arts)</option>
          <option value="12-Commerce">‡§ï‡§ï‡•ç‡§∑‡§æ 12 (Commerce)</option>
          <option value="12-Science">‡§ï‡§ï‡•ç‡§∑‡§æ 12 (Science)</option>
        </select>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">‡§®‡§æ‡§Æ</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">‡§ï‡§ï‡•ç‡§∑‡§æ</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">‡§∞‡•ã‡§≤ ‡§®‡§Ç‡§¨‡§∞</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">‡§ñ‡§æ‡§§‡§æ</th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ</th>
            </tr>
          </thead>
          <tbody id="studentsTableBody" class="bg-white divide-y divide-gray-200">
            <tr><td colspan="5" class="px-4 py-8 text-center text-gray-500">‡§ï‡§ï‡•ç‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç ‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§¶‡•á‡§ñ‡•á‡§Ç</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- 3. Selected student: Result & Fees -->
    <section id="selectedStudentSection" class="hidden bg-white rounded-lg shadow p-6 mb-8">
      <h2 class="text-xl font-bold text-teal-800 mb-2" id="selectedStudentTitle">‡§õ‡§æ‡§§‡•ç‡§∞: --</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Add Result -->
        <div>
          <h3 class="text-lg font-semibold text-teal-700 mb-3">‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç (‡§Ö‡§Ç‡§ï ‡§°‡§æ‡§≤‡§®‡•á ‡§™‡§∞ % ‡§µ ‡§ó‡•ç‡§∞‡•á‡§° ‡§Ö‡§™‡§®‡•á ‡§Ü‡§™)</h3>
          <form id="addResultForm" class="space-y-3">
            <input type="hidden" id="resultStudentId">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ</label>
              <input type="text" id="resultExamName" required class="w-full border rounded-lg px-3 py-2" placeholder="‡§Ö‡§∞‡•ç‡§ß‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï 2024">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">‡§∏‡§§‡•ç‡§∞</label>
              <input type="text" id="resultSession" class="w-full border rounded-lg px-3 py-2" placeholder="2024-25">
            </div>
            <div class="grid grid-cols-2 gap-2">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">‡§ï‡•Å‡§≤ ‡§Ö‡§Ç‡§ï</label>
                <input type="number" id="resultTotalMarks" class="w-full border rounded-lg px-3 py-2" placeholder="100" min="0">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§Ö‡§Ç‡§ï</label>
                <input type="number" id="resultObtainedMarks" class="w-full border rounded-lg px-3 py-2" placeholder="85" min="0">
              </div>
            </div>
            <div class="grid grid-cols-3 gap-2 text-sm">
              <div class="bg-gray-100 rounded px-2 py-2"><span class="text-gray-600">‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§:</span> <strong id="autoPercentage">--</strong></div>
              <div class="bg-gray-100 rounded px-2 py-2"><span class="text-gray-600">‡§ó‡•ç‡§∞‡•á‡§°:</span> <strong id="autoGrade">--</strong></div>
              <div class="bg-gray-100 rounded px-2 py-2"><span class="text-gray-600">‡§™‡§æ‡§∏/‡§´‡•á‡§≤:</span> <strong id="autoPassFail">--</strong></div>
            </div>
            <button type="submit" class="w-full bg-teal-600 text-white py-2 rounded-lg font-medium hover:bg-teal-700">‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>
          </form>
          <div class="mt-4">
            <h4 class="font-medium text-gray-700 mb-2">‡§á‡§∏ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h4>
            <div id="studentResultsList" class="space-y-2 text-sm"></div>
          </div>
        </div>
        <!-- Add Fee -->
        <div>
          <h3 class="text-lg font-semibold text-teal-700 mb-3">‡§´‡•Ä‡§∏ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§ú‡•ã‡§°‡§º‡•á‡§Ç / ‡§Ö‡§™‡§°‡•á‡§ü</h3>
          <form id="addFeeForm" class="space-y-3">
            <input type="hidden" id="feeStudentId">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">‡§µ‡§ø‡§µ‡§∞‡§£</label>
              <input type="text" id="feeDescription" class="w-full border rounded-lg px-3 py-2" placeholder="‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§´‡•Ä‡§∏ 2024-25">
            </div>
            <div class="grid grid-cols-2 gap-2">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">‡§ï‡•Å‡§≤ (‚Çπ)</label>
                <input type="number" id="feeAmount" required class="w-full border rounded-lg px-3 py-2" min="0" placeholder="15000">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">‡§¶‡•Ä ‡§ó‡§à (‚Çπ)</label>
                <input type="number" id="feePaid" class="w-full border rounded-lg px-3 py-2" min="0" value="0" placeholder="0">
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">‡§∏‡§§‡•ç‡§∞</label>
              <input type="text" id="feeSession" class="w-full border rounded-lg px-3 py-2" placeholder="2024-25">
            </div>
            <button type="submit" class="w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700">‡§´‡•Ä‡§∏ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>
          </form>
          <div class="mt-4">
            <h4 class="font-medium text-gray-700 mb-2">‡§á‡§∏ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§´‡•Ä‡§∏</h4>
            <div id="studentFeesList" class="space-y-2 text-sm"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="js/teacher-auth.js"></script>
  <script src="js/teacher.js"></script>
  <script>
    if (TeacherAuth.isAuthenticated()) {
      const s = TeacherAuth.getSession();
      if (s) document.getElementById('teacherName').textContent = 'Welcome, ' + (s.username || 'Teacher');
    }
  </script>
</body>
</html>
